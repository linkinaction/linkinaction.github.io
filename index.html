<!DOCTYPE html>
<html lang="en" class="scroll-smooth">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Link in Action - Your Link to Calgary’s Community Resources</title>

    <!-- Tailwind CSS for modern, responsive styling -->
    <script src="https://cdn.tailwindcss.com"></script>

    <!-- Google Fonts for professional typography -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap" rel="stylesheet">

    <!-- Firebase SDKs -->
    <script type="module">
        // Import the functions you need from the Firebase SDKs
        import { initializeApp } from "https://www.gstatic.com/firebasejs/11.6.1/firebase-app.js";
        import { getAuth, signInAnonymously, signInWithCustomToken, onAuthStateChanged } from "https://www.gstatic.com/firebasejs/11.6.1/firebase-auth.js";
        import { getFirestore, collection, addDoc, onSnapshot, query, orderBy } from "https://www.gstatic.com/firebasejs/11.6.1/firebase-firestore.js";

        // Global variables for Firebase (provided by the environment)
        const appId = typeof __app_id !== 'undefined' ? __app_id : 'default-app-id';
        const firebaseConfig = typeof __firebase_config !== 'undefined' ? JSON.parse(__firebase_config) : {};
        const initialAuthToken = typeof __initial_auth_token !== 'undefined' ? __initial_auth_token : null;

        // Initialize Firebase
        const app = initializeApp(firebaseConfig);
        const auth = getAuth(app);
        const db = getFirestore(app);

        // Global variables to be used in the main script
        window.firebaseApp = app;
        window.firebaseAuth = auth;
        window.firebaseDb = db;
        window.currentUserId = null; 
        window.isAuthReady = false;

        // Authenticate user
        onAuthStateChanged(auth, async (user) => {
            if (user) {
                window.currentUserId = user.uid;
                console.log("Firebase Auth: Authenticated user ID:", window.currentUserId);
            } else {
                try {
                    if (initialAuthToken) {
                        await signInWithCustomToken(auth, initialAuthToken);
                        window.currentUserId = auth.currentUser.uid;
                        console.log("Firebase Auth: Signed in with custom token:", window.currentUserId);
                    } else {
                        await signInAnonymously(auth);
                        window.currentUserId = auth.currentUser.uid;
                        console.log("Firebase Auth: Signed in anonymously:", window.currentUserId);
                    }
                } catch (error) {
                    console.error("Firebase Auth: Error during authentication:", error);
                }
            }
            window.isAuthReady = true;
            document.dispatchEvent(new CustomEvent('firebaseAuthReady'));
        });
    </script>

    <style>
        body { font-family: 'Inter', sans-serif; }
        .nav-link.active { color: #dc2626; font-weight: 600; }
        .page-section { display: none; }
        .page-section.active { display: block; }
        #map {
            height: 500px;
            width: 100%;
            border-radius: 0.5rem;
            box-shadow: 0 4px 6px -1px rgba(0, 0, 0, 0.1), 0 2px 4px -1px rgba(0, 0, 0, 0.06);
        }
        .gm-style-iw-d { overflow-x: hidden !important; }
        .gm-style-iw-c { padding: 12px !important; }
    </style>
</head>
<body class="bg-gray-50 text-gray-800">

    <!-- Header -->
    <header class="bg-white/80 backdrop-blur-lg sticky top-0 z-50 shadow-sm">
        <div class="container mx-auto px-6 py-4 flex justify-between items-center">
            <a href="#home" class="nav-link text-2xl font-bold text-gray-900">Link in Action</a>
            <nav class="hidden md:flex items-center space-x-8">
                <a href="#home" class="nav-link text-gray-600 hover:text-red-600 transition-colors duration-300 active">Home</a>
                <a href="#directory" class="nav-link text-gray-600 hover:text-red-600 transition-colors duration-300">Community Directory</a>
                <a href="#join" class="nav-link text-gray-600 hover:text-red-600 transition-colors duration-300">Join the Network</a>
                <a href="#about" class="nav-link text-gray-600 hover:text-red-600 transition-colors duration-300">About</a>
                <a href="#contact" class="nav-link text-gray-600 hover:text-red-600 transition-colors duration-300">Contact</a>
            </nav>
            <div class="md:hidden">
                <button id="mobile-menu-button" class="text-gray-900 focus:outline-none">
                    <svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 6h16M4 12h16m-7 6h7"></path></svg>
                </button>
            </div>
        </div>
        <div id="mobile-menu" class="hidden md:hidden bg-white border-t border-gray-200">
            <a href="#home" class="nav-link block px-6 py-3 text-gray-600 hover:bg-gray-100">Home</a>
            <a href="#directory" class="nav-link block px-6 py-3 text-gray-600 hover:bg-gray-100">Community Directory</a>
            <a href="#join" class="nav-link block px-6 py-3 text-gray-600 hover:bg-gray-100">Join the Network</a>
            <a href="#about" class="nav-link block px-6 py-3 text-gray-600 hover:bg-gray-100">About</a>
            <a href="#contact" class="nav-link block px-6 py-3 text-gray-600 hover:bg-gray-100">Contact</a>
        </div>
    </header>

    <!-- Main Content -->
    <main>
        <!-- Home Section -->
        <section id="home" class="page-section active">
            <div class="relative bg-red-700">
                <div class="absolute inset-0">
                    <img class="w-full h-full object-cover" src="./images/hero.jpg" alt="Calgary skyline with a modern bridge at dusk" onerror="this.onerror=null;this.src='https://placehold.co/1600x900/ef4444/ffffff?text=Calgary+Skyline+Fallback';">
                    <div class="absolute inset-0 bg-red-600 opacity-10 mix-blend-multiply" aria-hidden="true"></div>
                </div>
                <div class="relative max-w-4xl mx-auto text-center py-24 px-6 sm:py-32 lg:py-48">
                    <h1 class="text-4xl font-extrabold tracking-tight text-white sm:text-5xl lg:text-6xl">Welcome to Link In Action</h1>
                    <p class="mt-6 text-xl text-red-100">Your Link to Calgary's Community Resources</p>
                    <a href="#directory" class="nav-link mt-8 w-full inline-flex items-center justify-center px-6 py-3 border border-transparent rounded-md shadow-sm text-base font-medium text-red-600 bg-white hover:bg-red-50 sm:w-auto transition-colors">
                        Explore Community Resources
                    </a>
                </div>
            </div>
             <div class="bg-white">
                <div class="max-w-4xl mx-auto py-16 px-6 sm:py-24 lg:px-8 text-center">
                    <h2 class="text-3xl font-extrabold text-gray-900">Link In Action</h2>
                    <p class="mt-4 text-lg text-gray-600">Calgary's centralized platform for discovering community programs and services. Whether you're new to the city or seeking support, we make it easy to find the right programs for your needs. With many organizations providing similar services and important resources often hard to find, Link In Action brings clarity, access, and connection to the forefront of community support.</p>
                </div>
            </div>
        </section>

        <!-- Community Directory Section -->
        <section id="directory" class="page-section py-16 sm:py-24 bg-white">
            <div class="container mx-auto px-6">
                <div class="text-center mb-12">
                    <h2 class="text-3xl font-extrabold text-gray-900 sm:text-4xl">Community Directory</h2>
                    <p class="mt-4 text-lg text-gray-600">Find the resources you need, right in your community.</p>
                </div>

                <!-- Search Form -->
                <div class="bg-gray-100 p-8 rounded-lg shadow-md mb-12">
                    <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6">
                        <input type="text" id="keyword-search" placeholder="Search by keyword (e.g. 'food', 'shelter')" class="col-span-1 lg:col-span-2 w-full p-3 rounded-md border-gray-300 focus:ring-red-500 focus:border-red-500">
                        <select id="program-type-filter" class="w-full p-3 rounded-md border-gray-300 focus:ring-red-500 focus:border-red-500">
                            <option value="all">All Program Types</option>
                            <option value="food-shelter">Food & Shelter</option>
                            <option value="animal-welfare">Animal Welfare</option>
                            <option value="health-services">Health Services</option>
                            <option value="community-support">Community Support</option>
                            <option value="womens-services">Women's Services</option>
                            <option value="youth-services">Youth Services</option>
                            <option value="legal-services">Legal Services</option>
                            <option value="housing-services">Housing Services</option>
                            <option value="newcomer-services">Newcomer Services</option>
                            <option value="education">Education</option>
                            <option value="arts-culture">Arts & Culture</option>
                            <option value="seniors-services">Seniors Services</option>
                            <option value="mens-services">Men's Services</option>
                            <option value="environment">Environment</option>
                            <option value="sports-recreation">Sports & Recreation</option>
                            <option value="employment-services">Employment Services</option>
                        </select>
                        <select id="location-filter" class="w-full p-3 rounded-md border-gray-300 focus:ring-red-500 focus:border-red-500">
                            <option value="all">All Locations</option>
                            <option value="NW">NW Calgary</option>
                            <option value="NE">NE Calgary</option>
                            <option value="SW">SW Calgary</option>
                            <option value="SE">SE Calgary</option>
                            <option value="Downtown">Downtown</option>
                        </select>
                    </div>
                    <!-- View Toggle -->
                    <div class="flex items-center space-x-2 p-1 bg-gray-200 rounded-lg mt-4 w-fit ml-auto">
                        <button id="view-grid-btn" class="px-3 py-1 rounded-md bg-white text-red-600 shadow" title="Grid View">
                            <svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5" viewBox="0 0 20 20" fill="currentColor"><path d="M5 3a2 2 0 00-2 2v2a2 2 0 002 2h2a2 2 0 002-2V5a2 2 0 00-2-2H5zM5 11a2 2 0 00-2 2v2a2 2 0 002 2h2a2 2 0 002-2v-2a2 2 0 00-2-2H5zM11 5a2 2 0 012-2h2a2 2 0 012 2v2a2 2 0 01-2 2h-2a2 2 0 01-2-2V5zM11 13a2 2 0 012-2h2a2 2 0 012 2v2a2 2 0 01-2 2h-2a2 2 0 01-2-2v-2z" /></svg>
                        </button>
                        <button id="view-map-btn" class="px-3 py-1 rounded-md text-gray-600" title="Map View">
                            <svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5" viewBox="0 0 20 20" fill="currentColor"><path fill-rule="evenodd" d="M12 1.586l-4 4v12.828l4-4V1.586zM3.707 3.293A1 1 0 002 4v10a1 1 0 00.293.707l6 6a1 1 0 001.414 0l6-6A1 1 0 0018 14V4a1 1 0 00-.707-.707l-6-2a1 1 0 00-.586 0l-6 2z" clip-rule="evenodd" /></svg>
                        </button>
                    </div>
                </div>

                <!-- Map View -->
                <div id="map-view" class="hidden">
                    <div id="map" class="h-[500px] w-full rounded-lg shadow-md mb-12"></div>
                </div>

                <!-- Directory Grid -->
                <div id="grid-view">
                    <div id="directory-grid" class="grid md:grid-cols-2 lg:grid-cols-3 gap-8">
                        <!-- Location cards will be inserted here by JavaScript -->
                    </div>
                </div>
                
                <p id="no-results" class="text-center text-gray-500 mt-8 hidden">No organizations found matching your criteria.</p>
            </div>
        </section>

        <!-- Other sections (Join, About, Contact) -->
        <section id="join" class="page-section py-16 sm:py-24">
            <div class="container mx-auto px-6">
                 <div class="text-center mb-12">
                    <h2 class="text-3xl font-extrabold text-gray-900 sm:text-4xl">Join the Network</h2>
                    <p class="mt-4 text-lg text-gray-600">Get involved and make a difference in our community.</p>
                </div>
                <div class="grid md:grid-cols-3 gap-8 text-center">
                    <div class="bg-white p-8 rounded-lg shadow-md">
                        <h3 class="text-xl font-bold mb-2">Volunteer Opportunities</h3>
                        <p class="text-gray-600">Organizations may list volunteer opportunities here.</p>
                    </div>
                    <div class="bg-white p-8 rounded-lg shadow-md">
                        <h3 class="text-xl font-bold mb-2">Calls to Action</h3>
                        <p class="text-gray-600">Community members and organizations can respond to posted calls to action.</p>
                    </div>
                    <div class="bg-white p-8 rounded-lg shadow-md">
                        <h3 class="text-xl font-bold mb-2">Research Posters</h3>
                        <p class="text-gray-600">Posters targeting immigrants or newcomers can be listed here.</p>
                    </div>
                </div>
            </div>
        </section>
        <section id="about" class="page-section py-16 sm:py-24 bg-white">
            <div class="container mx-auto px-6 max-w-4xl">
                <div class="text-center mb-12"><h2 class="text-3xl font-extrabold text-gray-900 sm:text-4xl">About Us</h2></div>
                <div class="space-y-12">
                    <div><h3 class="text-2xl font-bold text-red-600 mb-4">Our Mission</h3><p class="text-lg text-gray-600">Link In Action was developed to enhance access to community services by providing a centralized, user-friendly digital platform that connects individuals with local organizations and programs in Calgary. Our mission is to bridge service gaps, promote inclusion, and empower individuals through streamlined access to vital resources.</p></div>
                    <div><h3 class="text-2xl font-bold text-red-600 mb-4">Our Objectives</h3><ul class="list-disc list-inside space-y-2 text-lg text-gray-600"><li>Empower users through customized search tools</li><li>Centralize access to community services</li><li>Enhance visibility and reduce redundancy</li></ul></div>
                    <div><h3 class="text-2xl font-bold text-red-600 mb-4">Our Team</h3><p class="text-lg text-gray-600">Meet the people behind Link In Action: Jasman & Arfa.</p></div>
                </div>
            </div>
        </section>
        <section id="contact" class="page-section py-16 sm:py-24">
          <div class="container mx-auto px-6 max-w-2xl">
            <div class="text-center mb-12"><h2 class="text-3xl font-extrabold text-gray-900 sm:text-4xl">Contact Us</h2><p class="mt-4 text-lg text-gray-600">If you have questions or need assistance, please reach out to us.</p></div>
            <form id="contact-form" action="https://script.google.com/macros/s/AKfycbxOVDMT8Rw8qEbXyZEIaWSqVMU6DnFMyrxKltTzfYhhaR_yhzck7vK1PxMWx8JZGLiz/exec" method="post" class="bg-white p-8 rounded-lg shadow-md space-y-6">
              <div><label for="contact-name" class="block text-sm font-medium text-gray-700">Name</label><input type="text" id="contact-name" name="name" required class="mt-1 block w-full p-3 rounded-md border-gray-300 focus:ring-red-500 focus:border-red-500"></div>
              <div><label for="contact-email" class="block text-sm font-medium text-gray-700">Email</label><input type="email" id="contact-email" name="email" required class="mt-1 block w-full p-3 rounded-md border-gray-300 focus:ring-red-500 focus:border-red-500"></div>
              <div><label for="contact-message" class="block text-sm font-medium text-gray-700">Message</label><textarea id="contact-message" name="message" rows="5" required class="mt-1 block w-full p-3 rounded-md border-gray-300 focus:ring-red-500 focus:border-red-500"></textarea></div>
              <button type="submit" class="w-full flex justify-center py-3 px-4 border border-transparent rounded-md shadow-sm text-base font-medium text-white bg-red-600 hover:bg-red-700 transition-colors">Send Message</button>
            </form>
            <div id="contact-form-message" class="mt-4 text-center"></div>
          </div>
        </section>
    </main>

    <!-- Footer -->
    <footer class="bg-red-900 text-white"> 
        <div class="container mx-auto py-8 px-6 text-center">
            <div class="flex justify-center space-x-6">
                <a href="https://www.linkedin.com/company/linkinaction" target="_blank" aria-label="LinkedIn" class="text-white hover:opacity-75 transition-opacity"><img src="./images/linkedin.jpg" alt="LinkedIn Logo" class="w-7 h-7" onerror="this.onerror=null;this.src='https://placehold.co/28x28/0A66C2/ffffff?text=LI';"></a>
                <a href="https://www.instagram.com/linkinaction" target="_blank" aria-label="Instagram" class="text-white hover:opacity-75 transition-opacity"><img src="./images/instagram.jpg" alt="Instagram Logo" class="w-7 h-7" onerror="this.onerror=null;this.src='https://placehold.co/28x28/E1306C/ffffff?text=IG';"></a>
                <a href="mailto:linkinaction@gmail.com" aria-label="Email" class="text-white hover:opacity-75 transition-opacity"><img src="./images/email.jpg" alt="Email Icon" class="w-7 h-7" onerror="this.onerror=null;this.src='https://placehold.co/28x28/D44638/ffffff?text=Email';"></a>
            </div>
        </div>
    </footer>

    <!-- Main Application Script -->
    <script>
        const GOOGLE_MAPS_API_KEY = 'AIzaSyBTO9piU4s9LVGYvob043hACb2S2hg7CMU'; 

        document.addEventListener('DOMContentLoaded', function() {
            // --- Global Variables ---
            let map;
            let infoWindow;
            let firebaseDb;
            let currentUserId;
            const sections = document.querySelectorAll('.page-section');
            const navLinks = document.querySelectorAll('.nav-link');
            const mobileMenuButton = document.getElementById('mobile-menu-button');
            const mobileMenu = document.getElementById('mobile-menu');

            // --- Directory Elements ---
            const directoryGrid = document.getElementById('directory-grid');
            const noResults = document.getElementById('no-results');
            const gridView = document.getElementById('grid-view');
            const mapView = document.getElementById('map-view');
            const viewGridBtn = document.getElementById('view-grid-btn');
            const viewMapBtn = document.getElementById('view-map-btn');

            // --- Location Data Store ---
            const locations = [];

            // --- Google Maps Initialization ---
            function loadGoogleMapsScript() {
                if (document.getElementById('google-maps-script')) return;
                const script = document.createElement('script');
                script.id = 'google-maps-script';
                script.src = `https://maps.googleapis.com/maps/api/js?key=${GOOGLE_MAPS_API_KEY}&callback=initMap&v=weekly`;
                script.async = true;
                document.head.appendChild(script);
            }

            window.initMap = function() {
                const mapElement = document.getElementById('map');
                if (!mapElement) return;

                const calgary = { lat: 51.0447, lng: -114.0719 };
                map = new google.maps.Map(mapElement, {
                    center: calgary,
                    zoom: 11,
                    mapId: 'DEMO_MAP_ID',
                });

                infoWindow = new google.maps.InfoWindow();

                // Load data from data.js and initialize markers
                if (typeof locationsData !== 'undefined') {
                    locations.length = 0; // Clear existing locations
                    locations.push(...locationsData);
                    locations.forEach(location => addMarker(location));
                    renderGrid(locations);
                }
                
                if (window.isAuthReady) {
                    fetchResourcesAndAddMarkers();
                } else {
                    document.addEventListener('firebaseAuthReady', fetchResourcesAndAddMarkers);
                }
            };

            function addMarker(location) {
                if (!location.lat || !location.lng) return;
                
                const marker = new google.maps.Marker({
                    position: { lat: location.lat, lng: location.lng },
                    map: map,
                    title: location.name,
                });
                location.marker = marker; // Store marker reference

                // When a marker is clicked, show an info window with basic details
                marker.addListener('click', () => {
                    if (infoWindow) infoWindow.close();
                    
                    const contentString = `
                        <div class="p-2">
                            <h3 class="font-bold text-lg mb-1">${location.name}</h3>
                            <p class="text-sm mb-1"><strong>Address:</strong> ${location.address}</p>
                            <p class="text-sm mb-1"><strong>Phone:</strong> ${location.phone}</p>
                            ${location.website ? `<p class="text-sm mb-1"><strong>Website:</strong> <a href="${location.website}" target="_blank" class="text-red-600">Visit</a></p>` : ''}
                        </div>`;

                    infoWindow.setContent(contentString);
                    infoWindow.open(map, marker);
                });
            }

            // --- Grid View Rendering ---
            function renderGrid(locations) {
                directoryGrid.innerHTML = '';
                locations.forEach(location => {
                    const card = document.createElement('div');
                    card.className = 'bg-white p-6 rounded-lg shadow-md hover:shadow-xl transition-shadow duration-300 flex flex-col';
                    card.innerHTML = `
                        <h3 class="text-xl font-bold mb-2 text-red-700">${location.name}</h3>
                        <p class="text-gray-600 mb-4 flex-grow">${location.description}</p>
                        <div class="border-t pt-4 mt-auto">
                            <p class="mb-2"><strong>Address:</strong> ${location.address || 'N/A'}</p>
                            <p class="mb-2"><strong>Phone:</strong> ${location.phone || 'N/A'}</p>
                            <div class="flex space-x-4">
                                ${location.website ? `<a href="${location.website}" target="_blank" class="text-red-600 hover:underline">Website</a>` : ''}
                                ${location.email ? `<a href="mailto:${location.email}" class="text-red-600 hover:underline">Email</a>` : ''}
                            </div>
                        </div>
                    `;
                    directoryGrid.appendChild(card);
                });
            }

            // --- Search and Filtering Logic ---
            function getQuadrant(address) {
                if (!address) return 'all';
                const addr = address.toLowerCase();
                if (addr.includes(' nw')) return 'NW';
                if (addr.includes(' ne')) return 'NE';
                if (addr.includes(' sw')) return 'SW';
                if (addr.includes(' se')) return 'SE';
                if (addr.includes(' ave sw') || addr.includes(' ave se') || addr.includes(' st sw') || addr.includes(' st se')) {
                    const parts = addr.split(' ');
                    const aveIndex = parts.indexOf('ave');
                    const stIndex = parts.indexOf('st');
                    
                    let numberPart = -1;
                    if(aveIndex > 0) numberPart = parseInt(parts[aveIndex-1], 10);
                    else if(stIndex > 0) numberPart = parseInt(parts[stIndex-1], 10);

                    if (numberPart > 0 && numberPart < 18) return 'Downtown';
                }
                return 'all'; // Default if quadrant not found
            }

            function filterAndRender() {
                const keyword = document.getElementById('keyword-search').value.toLowerCase();
                const type = document.getElementById('program-type-filter').value;
                const locationFilter = document.getElementById('location-filter').value;

                const filtered = locations.filter(loc => {
                    const nameMatch = loc.name.toLowerCase().includes(keyword);
                    const descMatch = loc.description.toLowerCase().includes(keyword);
                    const typeMatch = type === 'all' || loc.type === type;
                    const locationMatch = locationFilter === 'all' || getQuadrant(loc.address) === locationFilter;
                    
                    return (nameMatch || descMatch) && typeMatch && locationMatch;
                });
                
                if (filtered.length === 0) {
                    noResults.classList.remove('hidden');
                } else {
                    noResults.classList.add('hidden');
                }

                renderGrid(filtered);
                
                // Update map markers
                locations.forEach(loc => {
                    const isVisible = filtered.some(f => f.name === loc.name && f.address === loc.address);
                    if (loc.marker) {
                        loc.marker.setMap(isVisible ? map : null);
                    }
                });
            }
            
            // --- View Toggling ---
            viewGridBtn.addEventListener('click', () => {
                mapView.classList.add('hidden');
                gridView.classList.remove('hidden');
                viewGridBtn.classList.add('bg-white', 'text-red-600', 'shadow');
                viewMapBtn.classList.remove('bg-white', 'text-red-600', 'shadow');
            });

            viewMapBtn.addEventListener('click', () => {
                gridView.classList.add('hidden');
                mapView.classList.remove('hidden');
                viewMapBtn.classList.add('bg-white', 'text-red-600', 'shadow');
                viewGridBtn.classList.remove('bg-white', 'text-red-600', 'shadow');
                
                // Initialize map if not already done
                if (!map) {
                    loadGoogleMapsScript();
                } else {
                    // Invalidate map size to ensure it renders correctly after being hidden
                    setTimeout(() => google.maps.event.trigger(map, 'resize'), 0);
                }
            });

            // --- Firebase Firestore Logic ---
            function fetchResourcesAndAddMarkers() {
                firebaseDb = window.firebaseDb;
                currentUserId = window.currentUserId;
                if (!firebaseDb || !currentUserId) return;

                const q = query(collection(firebaseDb, `artifacts/${appId}/public/data/community_resources`));
                onSnapshot(q, (snapshot) => {
                    snapshot.docChanges().forEach((change) => {
                        if (change.type === "added") {
                            const resource = change.doc.data();
                            const exists = locations.some(loc => loc.name === resource.name && loc.address === resource.address);
                            if (!exists && resource.lat && resource.lng) {
                                const newLocation = {
                                    name: resource.name,
                                    address: resource.address || "Address not provided",
                                    phone: resource.phone || "Phone not provided",
                                    lat: resource.lat,
                                    lng: resource.lng,
                                    type: resource.type || "community-support",
                                    description: resource.description || "A community resource in Calgary.",
                                    marker: null
                                };
                                locations.push(newLocation);
                                addMarker(newLocation);
                                renderGrid(locations); // Re-render grid with new data
                            }
                        }
                    });
                }, (error) => {
                    console.error("Firestore: Error fetching documents: ", error);
                });
            }

            // --- Page Navigation & Event Listeners ---
            function showSection(hash) {
                const targetHash = (hash === '' || hash === '#') ? '#home' : hash;
                sections.forEach(s => s.classList.toggle('active', `#${s.id}` === targetHash));
                navLinks.forEach(l => l.classList.toggle('active', l.getAttribute('href') === targetHash));
                mobileMenu.classList.add('hidden');
                window.scrollTo(0, 0);

                if (targetHash === '#directory' && !map) {
                    // Load data from data.js if available
                    if (typeof locationsData !== 'undefined' && locations.length === 0) {
                        locations.push(...locationsData);
                        renderGrid(locations);
                    }
                }
            }

            navLinks.forEach(link => link.addEventListener('click', (e) => {
                e.preventDefault();
                const targetHash = link.getAttribute('href');
                history.pushState(null, null, targetHash);
                showSection(targetHash);
            }));

            window.addEventListener('popstate', () => showSection(window.location.hash));
            mobileMenuButton.addEventListener('click', () => mobileMenu.classList.toggle('hidden'));
            
            // Search filter event listeners
            document.getElementById('keyword-search').addEventListener('input', filterAndRender);
            document.getElementById('program-type-filter').addEventListener('change', filterAndRender);
            document.getElementById('location-filter').addEventListener('change', filterAndRender);

            // Initial page load
            showSection(window.location.hash);
            
            // Load data from data.js on initial load
            if (typeof locationsData !== 'undefined' && locations.length === 0) {
                locations.push(...locationsData);
                renderGrid(locations);
            }
            
            // Contact form logic
            const contactForm = document.getElementById('contact-form');
            const contactMessage = document.getElementById('contact-form-message');
            contactForm.addEventListener('submit', async e => {
                e.preventDefault();
                contactMessage.textContent = 'Sending…';
                contactMessage.className = 'mt-4 text-center text-gray-600';
                try {
                    const res = await fetch(contactForm.action, { method: 'POST', body: new FormData(contactForm) });
                    if (!res.ok) throw new Error(`Status ${res.status}`);
                    contactForm.reset();
                    contactMessage.textContent = 'Thank you! Your message has been sent.';
                    contactMessage.className = 'mt-4 text-center text-green-600';
                } catch (err) {
                    contactMessage.textContent = 'Oops—something went wrong. Please try again.';
                    contactMessage.className = 'mt-4 text-center text-red-600';
                }
            });
        });
    </script>
    const locationsData = [
    {
        name: "The Mustard Seed",
        address: "7025 44 St SE, Calgary, AB T2C 4E8",
        phone: "403-723-9422",
        website: "https://theseed.ca",
        email: "info@theseed.ca",
        type: "food-shelter",
        description: "A non-profit organization providing food shelter services to the Calgary community.",
        lat: 50.9930,
        lng: -113.9610
    },
    {
        name: "Calgary Drop-In & Rehab Centre",
        address: "3640 11A St NE, Calgary, AB",
        phone: "403-264-0856",
        website: "https://calgarydropin.ca",
        email: "",
        type: "food-shelter",
        description: "A non-profit organization providing food shelter services to the Calgary community.",
        lat: 51.0824,
        lng: -114.0152
    },
    {
        name: "Calgary Food Bank",
        address: "5000 11 St SE, Calgary, AB T2H 2Y5",
        phone: "403-253-2050",
        website: "https://calgaryfoodbank.com",
        email: "",
        type: "food-shelter",
        description: "A non-profit organization providing food shelter services to the Calgary community.",
        lat: 50.9995,
        lng: -114.0193
    },
    {
        name: "Calgary Humane Society",
        address: "4455 110 Ave SE, Calgary, AB T2C 2T7",
        phone: "403-205-4455",
        website: "https://www.calgaryhumane.ca",
        email: "",
        type: "animal-welfare",
        description: "A non-profit organization providing animal welfare services to the Calgary community.",
        lat: 50.9508,
        lng: -113.9334
    },
    {
        name: "Inn From The Cold",
        address: "110 11 Ave SE, Calgary, AB T2G 0X5",
        phone: "403-266-3600",
        website: "https://innfromthecold.org",
        email: "",
        type: "food-shelter",
        description: "A non-profit organization providing food shelter services to the Calgary community.",
        lat: 51.0423,
        lng: -114.0597
    },
    {
        name: "Distress Centre Calgary / 211 Alberta",
        address: "Suite 500, 1010 8 Ave SW, Calgary, AB",
        phone: "211 or 403-266-4357",
        website: "https://ab.211.ca",
        email: "",
        type: "health-services",
        description: "A non-profit organization providing health services services to the Calgary community.",
        lat: 51.0454,
        lng: -114.0837
    },
    {
        name: "Momentum",
        address: "1010 8 Ave SW #300, Calgary, AB",
        phone: "403-272-9323",
        website: "https://momentum.org",
        email: "",
        type: "community-support",
        description: "A non-profit organization providing community support services to the Calgary community.",
        lat: 51.0454,
        lng: -114.0837
    },
    {
        name: "Calgary Women's Emergency Shelter",
        address: "500-1509 17 Ave SW, Calgary, AB",
        phone: "403-290-1552",
        website: "https://www.calgarywomensshelter.com",
        email: "",
        type: "womens-services",
        description: "A non-profit organization providing womens services services to the Calgary community.",
        lat: 51.0383,
        lng: -114.0963
    },
    {
        name: "Wood's Homes",
        address: "805 37 St NW, Calgary, AB",
        phone: "403-299-9699",
        website: "https://www.woodshomes.ca",
        email: "",
        type: "youth-services",
        description: "A non-profit organization providing youth services services to the Calgary community.",
        lat: 51.0597,
        lng: -114.1417
    },
    {
        name: "Alpha House",
        address: "203 15 Ave SE, Calgary, AB",
        phone: "403-234-7388",
        website: "https://alphahousecalgary.com",
        email: "",
        type: "food-shelter",
        description: "A non-profit organization providing food shelter services to the Calgary community.",
        lat: 51.0401,
        lng: -114.0565
    },
    {
        name: "Calgary John Howard Society",
        address: "910 7 Ave SW #300, Calgary, AB",
        phone: "403-265-4144",
        website: "https://www.calgaryjohnhoward.org",
        email: "",
        type: "legal-services",
        description: "A non-profit organization providing legal services services to the Calgary community.",
        lat: 51.0487,
        lng: -114.0820
    },
    {
        name: "Elizabeth Fry Society of Calgary",
        address: "1731 10 Ave SW, Calgary, AB",
        phone: "403-294-0737",
        website: "https://www.elizabethfrycalgary.ca",
        email: "",
        type: "legal-services",
        description: "A non-profit organization providing legal services services to the Calgary community.",
        lat: 51.0441,
        lng: -114.0999
    },
    {
        name: "CUPS (Calgary Urban Project Society)",
        address: "1001 10 Ave SW, Calgary, AB",
        phone: "403-221-8780",
        website: "https://www.cupscalgary.com",
        email: "",
        type: "health-services",
        description: "A non-profit organization providing health services services to the Calgary community.",
        lat: 51.0442,
        lng: -114.0837
    },
    {
        name: "The Alex Community Health Centre",
        address: "2840 2 Ave SE, Calgary, AB",
        phone: "403-520-2260",
        website: "https://www.thealex.ca",
        email: "",
        type: "health-services",
        description: "A non-profit organization providing health services services to the Calgary community.",
        lat: 51.0503,
        lng: -113.9995
    },
    {
        name: "Accessible Housing Calgary",
        address: "200-802 3 Ave SW, Calgary, AB",
        phone: "403-282-1872",
        website: "https://accessiblehousing.ca",
        email: "",
        type: "housing-services",
        description: "A non-profit organization providing housing services services to the Calgary community.",
        lat: 51.0514,
        lng: -114.0805
    },
    {
        name: "Canadian Mental Health Association - Calgary Region",
        address: "#400, 105 12 Ave SE, Calgary, AB",
        phone: "403-297-1700",
        website: "https://cmha.calgary.ab.ca",
        email: "",
        type: "health-services",
        description: "A non-profit organization providing health services services to the Calgary community.",
        lat: 51.0421,
        lng: -114.0605
    },
    {
        name: "Kids Cancer Care Foundation of Alberta",
        address: "5757 4 St SE, Calgary, AB",
        phone: "403-216-9210",
        website: "https://www.kidscancercare.ab.ca",
        email: "",
        type: "youth-services",
        description: "A non-profit organization providing youth services services to the Calgary community.",
        lat: 50.9888,
        lng: -114.0652
    },
    {
        name: "Ronald McDonald House Charities Alberta",
        address: "111 West Campus Place NW, Calgary, AB",
        phone: "403-240-3000",
        website: "https://rmhcalberta.org",
        email: "",
        type: "food-shelter",
        description: "A non-profit organization providing food shelter services to the Calgary community.",
        lat: 51.0808,
        lng: -114.1423
    },
    {
        name: "Brown Bagging for Calgary's Kids",
        address: "909 11 Ave SW, Calgary, AB",
        phone: "403-264-7979",
        website: "https://bb4ck.org",
        email: "",
        type: "youth-services",
        description: "A non-profit organization providing youth services services to the Calgary community.",
        lat: 51.0435,
        lng: -114.0827
    },
    {
        name: "YWCA Calgary",
        address: "320 5 Ave SE, Calgary, AB",
        phone: "403-263-1550",
        website: "https://www.ywcalgary.ca",
        email: "",
        type: "womens-services",
        description: "A non-profit organization providing womens services services to the Calgary community.",
        lat: 51.0486,
        lng: -114.0531
    },
    {
        name: "Calgary Immigrant Women's Association",
        address: "200-138 4 Ave SE, Calgary, AB",
        phone: "403-263-4414",
        website: "https://www.ciwa-online.com",
        email: "",
        type: "womens-services",
        description: "A non-profit organization providing womens services services to the Calgary community.",
        lat: 51.0498,
        lng: -114.0583
    },
    {
        name: "Immigrant Services Calgary",
        address: "910 7 Ave SW #1200, Calgary, AB",
        phone: "403-265-1120",
        website: "https://www.immigrantservicescalgary.ca",
        email: "",
        type: "newcomer-services",
        description: "A non-profit organization providing newcomer services services to the Calgary community.",
        lat: 51.0487,
        lng: -114.0820
    },
    {
        name: "Centre for Newcomers",
        address: "125, 565 - 36 Street NE, Calgary, AB",
        phone: "403-569-3325",
        website: "https://www.centrefornewcomers.ca",
        email: "",
        type: "newcomer-services",
        description: "A non-profit organization providing newcomer services services to the Calgary community.",
        lat: 51.0561,
        lng: -113.9782
    },
    {
        name: "Calgary Catholic Immigration Society",
        address: "1111 11 Ave SW 5th Floor, Calgary, AB",
        phone: "403-262-2006",
        website: "https://www.ccisab.ca",
        email: "",
        type: "newcomer-services",
        description: "A non-profit organization providing newcomer services services to the Calgary community.",
        lat: 51.0436,
        lng: -114.0863
    },
    {
        name: "Calgary Bridge Foundation for Youth",
        address: "#205, 920 36 Street NE, Calgary, AB",
        phone: "403-230-7745",
        website: "https://www.cbfy.ca",
        email: "",
        type: "youth-services",
        description: "A non-profit organization providing youth services services to the Calgary community.",
        lat: 51.0594,
        lng: -113.9782
    },
    {
        name: "Big Brothers Big Sisters of Calgary and Area",
        address: "5945 Centre St S, Calgary, AB",
        phone: "403-777-3535",
        website: "https://bbbscalgary.ca",
        email: "",
        type: "youth-services",
        description: "A non-profit organization providing youth services services to the Calgary community.",
        lat: 50.9875,
        lng: -114.0628
    },
    {
        name: "Boys & Girls Clubs of Calgary",
        address: "223 12 Ave SW, Calgary, AB",
        phone: "403-276-9981",
        website: "https://www.boysandgirlsclubsofcalgary.ca",
        email: "",
        type: "youth-services",
        description: "A non-profit organization providing youth services services to the Calgary community.",
        lat: 51.0423,
        lng: -114.0673
    },
    {
        name: "Closer to Home Community Services",
        address: "3507 17 Ave SW, Calgary, AB",
        phone: "403-543-0550",
        website: "https://www.closertohome.com",
        email: "",
        type: "community-support",
        description: "A non-profit organization providing community support services to the Calgary community.",
        lat: 51.0384,
        lng: -114.1374
    },
    {
        name: "carya",
        address: "200, 1000 8 Ave SW, Calgary, AB",
        phone: "403-269-9888",
        website: "https://caryacalgary.ca",
        email: "",
        type: "community-support",
        description: "A non-profit organization providing community support services to the Calgary community.",
        lat: 51.0456,
        lng: -114.0838
    },
    {
        name: "Aspen Family & Community Network Society",
        address: "20, 2404 42 Ave SE, Calgary, AB",
        phone: "403-219-3477",
        website: "https://www.aspenfamily.org",
        email: "",
        type: "community-support",
        description: "A non-profit organization providing community support services to the Calgary community.",
        lat: 51.0068,
        lng: -114.0041
    },
    {
        name: "Further Education Society of Alberta",
        address: "130, 2121 29 Street NE, Calgary, AB",
        phone: "403-250-5034",
        website: "https://www.furthered.ca",
        email: "",
        type: "education",
        description: "A non-profit organization providing education services to the Calgary community.",
        lat: 51.0700,
        lng: -113.9961
    },
    {
        name: "Calgary Public Library Foundation",
        address: "800 3 St SE, Calgary, AB",
        phone: "403-221-2002",
        website: "https://libraryfoundation.ca",
        email: "",
        type: "education",
        description: "A non-profit organization providing education services to the Calgary community.",
        lat: 51.0452,
        lng: -114.0539
    },
    {
        name: "Calgary Arts Development",
        address: "1430, 225 8 Ave SW, Calgary, AB",
        phone: "403-264-5330",
        website: "https://calgaryartsdevelopment.com",
        email: "",
        type: "arts-culture",
        description: "A non-profit organization providing arts culture services to the Calgary community.",
        lat: 51.0461,
        lng: -114.0673
    },
    {
        name: "Propellus",
        address: "1177 11 Ave SW #300, Calgary, AB",
        phone: "403-265-5633",
        website: "https://www.propellus.org",
        email: "",
        type: "community-support",
        description: "A non-profit organization providing community support services to the Calgary community.",
        lat: 51.0435,
        lng: -114.0877
    },
    {
        name: "United Way of Calgary and Area",
        address: "600, 105 12 Ave SE, Calgary, AB",
        phone: "403-231-6265",
        website: "https://www.calgaryunitedway.org",
        email: "",
        type: "community-support",
        description: "A non-profit organization providing community support services to the Calgary community.",
        lat: 51.0421,
        lng: -114.0605
    },
    {
        name: "Calgary Foundation",
        address: "1180, 105 12 Ave SE, Calgary, AB",
        phone: "403-802-7700",
        website: "https://calgaryfoundation.org",
        email: "",
        type: "community-support",
        description: "A non-profit organization providing community support services to the Calgary community.",
        lat: 51.0421,
        lng: -114.0605
    },
    {
        name: "The Poppy Fund / Calgary Veteran's Food Bank",
        address: "#1, 4539 – 6th Street N.E., Calgary, AB",
        phone: "403-265-6304",
        website: "https://www.calgarypoppyfund.com",
        email: "",
        type: "food-shelter",
        description: "A non-profit organization providing food shelter services to the Calgary community.",
        lat: 51.0954,
        lng: -114.0396
    },
    {
        name: "Meals on Wheels",
        address: "5759 80 Ave SE, Calgary, AB",
        phone: "403-243-2834",
        website: "https://www.mealsonwheels.com",
        email: "",
        type: "food-shelter",
        description: "A non-profit organization providing food shelter services to the Calgary community.",
        lat: 50.9892,
        lng: -113.9692
    },
    {
        name: "Kerby Centre",
        address: "1133 7 Ave SW, Calgary, AB",
        phone: "403-265-0661",
        website: "https://www.kerbycentre.com",
        email: "",
        type: "seniors-services",
        description: "A non-profit organization providing seniors services services to the Calgary community.",
        lat: 51.0488,
        lng: -114.0870
    },
    {
        name: "Operation Eyesight Universal",
        address: "#200, 4321 9 St SE, Calgary, AB",
        phone: "403-283-6323",
        website: "https://operationeyesight.com",
        email: "",
        type: "health-services",
        description: "A non-profit organization providing health services services to the Calgary community.",
        lat: 51.0061,
        lng: -114.0245
    },
    {
        name: "Wellspring Calgary",
        address: "1404 Home Rd NW, Calgary, AB",
        phone: "403-521-5292",
        website: "https://wellspringcalgary.ca",
        email: "",
        type: "health-services",
        description: "A non-profit organization providing health services services to the Calgary community.",
        lat: 51.0660,
        lng: -114.1611
    },
    {
        name: "Canadian Red Cross - Southern Alberta Region",
        address: "1305 11 Ave SW, Calgary, AB",
        phone: "403-273-4426",
        website: "https://www.redcross.ca",
        email: "",
        type: "health-services",
        description: "A non-profit organization providing health services services to the Calgary community.",
        lat: 51.0435,
        lng: -114.0906
    },
    {
        name: "Salvation Army - Community Services Calgary",
        address: "3823 34 St NE, Calgary, AB",
        phone: "403-410-1111",
        website: "https://salvationarmy.ca/alberta",
        email: "",
        type: "community-support",
        description: "A non-profit organization providing community support services to the Calgary community.",
        lat: 51.0847,
        lng: -113.9829
    },
    {
        name: "Habitat for Humanity Southern Alberta",
        address: "210, 805 Manning Rd NE, Calgary, AB",
        phone: "403-253-9331",
        website: "https://www.habitatsouthernab.ca",
        email: "",
        type: "housing-services",
        description: "A non-profit organization providing housing services services to the Calgary community.",
        lat: 51.0581,
        lng: -114.0305
    },
    {
        name: "Calgary Legal Guidance",
        address: "840 7 Ave SW #100, Calgary, AB",
        phone: "403-234-9266",
        website: "https://clg.ab.ca",
        email: "",
        type: "legal-services",
        description: "A non-profit organization providing legal services services to the Calgary community.",
        lat: 51.0489,
        lng: -114.0811
    },
    {
        name: "Pro Bono Law Alberta",
        address: "255 5 Ave SW #500, Calgary, AB",
        phone: "403-541-4803",
        website: "https://pbla.ca",
        email: "",
        type: "legal-services",
        description: "A non-profit organization providing legal services services to the Calgary community.",
        lat: 51.0490,
        lng: -114.0689
    },
    {
        name: "Student Legal Assistance",
        address: "Murray Fraser Hall, University of Calgary, 2500 University Dr NW, Calgary, AB",
        phone: "403-220-6637",
        website: "https://slacalgary.com",
        email: "",
        type: "legal-services",
        description: "A non-profit organization providing legal services services to the Calgary community.",
        lat: 51.0772,
        lng: -114.1306
    },
    {
        name: "Rise (formerly Enterprising Women)",
        address: "#100, 105 12 Ave SE, Calgary, AB",
        phone: "403-237-8858",
        website: "https://www.risecalgary.ca",
        email: "",
        type: "womens-services",
        description: "A non-profit organization providing womens services services to the Calgary community.",
        lat: 51.0421,
        lng: -114.0605
    },
    {
        name: "Servants Anonymous Society of Calgary",
        address: "1008 10 St SE, Calgary, AB",
        phone: "403-237-8477",
        website: "https://www.servantsanon.com",
        email: "",
        type: "community-support",
        description: "A non-profit organization providing community support services to the Calgary community.",
        lat: 51.0436,
        lng: -114.0396
    },
    {
        name: "HIV Community Link",
        address: "110 16a St NW, Calgary, AB",
        phone: "403-508-2500",
        website: "https://www.hivcl.org",
        email: "",
        type: "health-services",
        description: "A non-profit organization providing health services services to the Calgary community.",
        lat: 51.0537,
        lng: -114.0993
    },
    {
        name: "Calgary Sexual Health Centre",
        address: "#304, 301 14 St NW, Calgary, AB",
        phone: "403-283-5580",
        website: "https://www.calgarysexualhealth.ca",
        email: "",
        type: "health-services",
        description: "A non-profit organization providing health services services to the Calgary community.",
        lat: 51.0543,
        lng: -114.0945
    },
    {
        name: "Calgary Counselling Centre",
        address: "#1000, 105 12 Ave SE, Calgary, AB",
        phone: "403-691-5991",
        website: "https://calgarycounselling.com",
        email: "",
        type: "health-services",
        description: "A non-profit organization providing health services services to the Calgary community.",
        lat: 51.0421,
        lng: -114.0605
    },
    {
        name: "Eastside Community Centre (operated by YMCA)",
        address: "1010 8 Ave SW, Calgary, AB",
        phone: "403-269-6701",
        website: "https://www.ymcacalgary.org/eastside",
        email: "",
        type: "community-support",
        description: "A non-profit organization providing community support services to the Calgary community.",
        lat: 51.0454,
        lng: -114.0837
    },
    {
        name: "Calgary Scope Society",
        address: "219 18 St SE, Calgary, AB",
        phone: "403-509-0200",
        website: "https://www.calgaryscope.org",
        email: "",
        type: "community-support",
        description: "A non-profit organization providing community support services to the Calgary community.",
        lat: 51.0494,
        lng: -114.0152
    },
    {
        name: "Calgary Quest School",
        address: "3405 37 St SW, Calgary, AB",
        phone: "403-253-0333",
        website: "https://www.questschool.ca",
        email: "",
        type: "education",
        description: "A non-profit organization providing education services to the Calgary community.",
        lat: 51.0204,
        lng: -114.1437
    },
    {
        name: "Between Friends",
        address: "8989 Macleod Trail SW #205, Calgary, AB",
        phone: "403-269-9133",
        website: "https://betweenfriends.ab.ca",
        email: "",
        type: "youth-services",
        description: "A non-profit organization providing youth services services to the Calgary community.",
        lat: 50.9620,
        lng: -114.0682
    },
    {
        name: "Easter Seals Alberta",
        address: "103, 811 Manning Rd NE, Calgary, AB",
        phone: "403-235-5662",
        website: "https://www.easterseals.ab.ca",
        email: "",
        type: "community-support",
        description: "A non-profit organization providing community support services to the Calgary community.",
        lat: 51.0583,
        lng: -114.0305
    },
    {
        name: "Foothills Academy Society",
        address: "745 37 St NW, Calgary, AB",
        phone: "403-270-9400",
        website: "https://www.foothillsacademy.org",
        email: "",
        type: "education",
        description: "A non-profit organization providing education services to the Calgary community.",
        lat: 51.0586,
        lng: -114.1417
    },
    {
        name: "CNIB Foundation (Calgary)",
        address: "10 11a St NE, Calgary, AB",
        phone: "403-266-8831",
        website: "https://cnib.ca",
        email: "",
        type: "health-services",
        description: "A non-profit organization providing health services services to the Calgary community.",
        lat: 51.0515,
        lng: -114.0182
    },
    {
        name: "Deaf & Hear Alberta",
        address: "6323 10 St SE, Calgary, AB",
        phone: "403-284-6200",
        website: "https://www.deafandhearalberta.ca",
        email: "",
        type: "health-services",
        description: "A non-profit organization providing health services services to the Calgary community.",
        lat: 50.9840,
        lng: -114.0207
    },
    {
        name: "Cerebral Palsy Association in Alberta",
        address: "121, 3608 33 St NW, Calgary, AB",
        phone: "403-219-3603",
        website: "https://www.cpalberta.com",
        email: "",
        type: "health-services",
        description: "A non-profit organization providing health services services to the Calgary community.",
        lat: 51.0827,
        lng: -114.1332
    },
    {
        name: "Kidney Foundation of Canada - Southern Alberta",
        address: "6007 1a St SW, Calgary, AB",
        phone: "403-255-6108",
        website: "https://kidney.ca/southern-alberta",
        email: "",
        type: "health-services",
        description: "A non-profit organization providing health services services to the Calgary community.",
        lat: 50.9865,
        lng: -114.0728
    },
    {
        name: "Heart & Stroke Foundation - Alberta",
        address: "119 14 St NW #100, Calgary, AB",
        phone: "403-264-5549",
        website: "https://www.heartandstroke.ca",
        email: "",
        type: "health-services",
        description: "A non-profit organization providing health services services to the Calgary community.",
        lat: 51.0531,
        lng: -114.0945
    },
    {
        name: "Diabetes Canada - Calgary and District Branch",
        address: "220, 6223 2 St SE, Calgary, AB",
        phone: "403-266-0620",
        website: "https://www.diabetes.ca",
        email: "",
        type: "health-services",
        description: "A non-profit organization providing health services services to the Calgary community.",
        lat: 50.9847,
        lng: -114.0583
    },
    {
        name: "The Calgary Ability Network",
        address: "103, 811 Manning Rd NE, Calgary, AB",
        phone: "403-283-4200",
        website: "https://www.calgaryabilitynetwork.ca",
        email: "",
        type: "community-support",
        description: "A non-profit organization providing community support services to the Calgary community.",
        lat: 51.0583,
        lng: -114.0305
    },
    {
        name: "Calgary Newcomers Collaborative",
        address: "1111 11 Ave SW 5th Floor, Calgary, AB",
        phone: "403-262-2006",
        website: "https://www.calgarynewcomerscollaborative.ca",
        email: "",
        type: "newcomer-services",
        description: "A non-profit organization providing newcomer services services to the Calgary community.",
        lat: 51.0436,
        lng: -114.0863
    },
    {
        name: "Calgary Immigrant Educational Society",
        address: "1723 40 St SE, Calgary, AB",
        phone: "403-235-3666",
        website: "https://www.immigrant-education.ca",
        email: "",
        type: "newcomer-services",
        description: "A non-profit organization providing newcomer services services to the Calgary community.",
        lat: 51.0372,
        lng: -113.9723
    },
    {
        name: "Calgary Literacy Project (Calgary Reads)",
        address: "105, 105 12 Ave SE, Calgary, AB",
        phone: "403-686-9300",
        website: "https://www.calgaryreads.com",
        email: "",
        type: "education",
        description: "A non-profit organization providing education services to the Calgary community.",
        lat: 51.0421,
        lng: -114.0605
    },
    {
        name: "Calgary Refugee Support",
        address: "125, 565 - 36 Street NE, Calgary, AB",
        phone: "403-569-3325",
        website: "https://www.centrefornewcomers.ca/refugeesupport",
        email: "",
        type: "newcomer-services",
        description: "A non-profit organization providing newcomer services services to the Calgary community.",
        lat: 51.0561,
        lng: -113.9782
    },
    {
        name: "Calgary Seniors' Resource Society",
        address: "3639 26 St NE, Calgary, AB T1Y 5E1",
        phone: "403-266-6200",
        website: "https://www.calgaryseniors.org",
        email: "",
        type: "seniors-services",
        description: "A non-profit organization providing seniors services services to the Calgary community.",
        lat: 51.0831,
        lng: -114.0003
    },
    {
        name: "Calgary Youth Services Network",
        address: "203 15 Ave SE, Calgary, AB",
        phone: "403-234-7388",
        website: "https://www.alphahousecalgary.com",
        email: "",
        type: "youth-services",
        description: "A non-profit organization providing youth services services to the Calgary community.",
        lat: 51.0401,
        lng: -114.0565
    },
    {
        name: "Calgary Volunteer Centre (Propellus)",
        address: "1177 11 Ave SW #300, Calgary, AB",
        phone: "403-265-5633",
        website: "https://www.volunteercalgary.ab.ca",
        email: "",
        type: "employment-services",
        description: "A non-profit organization providing employment services services to the Calgary community.",
        lat: 51.0435,
        lng: -114.0877
    },
    {
        name: "Calgary Animal Rescue Society (CARES)",
        address: "Bay G, 3400 48 Ave NE, Calgary, AB",
        phone: "403-269-2273",
        website: "https://www.caas.ca",
        email: "",
        type: "animal-welfare",
        description: "A non-profit organization providing animal welfare services to the Calgary community.",
        lat: 51.0963,
        lng: -113.9575
    },
    {
        name: "Calgary Music Education Foundation",
        address: "200-138 4 Ave SE, Calgary, AB",
        phone: "403-263-4414",
        website: "https://www.calgarymusic.ca",
        email: "",
        type: "arts-culture",
        description: "A non-profit organization providing arts culture services to the Calgary community.",
        lat: 51.0498,
        lng: -114.0583
    },
    {
        name: "Calgary Arts & Culture Alliance",
        address: "1430, 225 8 Ave SW, Calgary, AB",
        phone: "403-264-5330",
        website: "https://calgaryartsdevelopment.com",
        email: "",
        type: "arts-culture",
        description: "A non-profit organization providing arts culture services to the Calgary community.",
        lat: 51.0461,
        lng: -114.0673
    },
    {
        name: "Calgary Environmental Action (Green Calgary)",
        address: "205, 223 12 Ave SW, Calgary, AB",
        phone: "403-230-1443",
        website: "https://www.greencalgary.org",
        email: "",
        type: "environment",
        description: "A non-profit organization providing environment services to the Calgary community.",
        lat: 51.0423,
        lng: -114.0673
    },
    {
        name: "Calgary Heritage Foundation",
        address: "1001 10 Ave SW, Calgary, AB",
        phone: "403-221-8780",
        website: "https://www.cupscalgary.com",
        email: "",
        type: "arts-culture",
        description: "A non-profit organization providing arts culture services to the Calgary community.",
        lat: 51.0442,
        lng: -114.0837
    },
    {
        name: "Calgary Historical Society",
        address: "PO Box 420, Stn G, Calgary, AB T3A 2A3",
        phone: "403-261-3662",
        website: "https://www.calgaryhistoricalsociety.ca",
        email: "",
        type: "arts-culture",
        description: "A non-profit organization providing arts culture services to the Calgary community.",
        lat: null,
        lng: null
    },
    {
        name: "Calgary Health Foundation",
        address: "800, 11012 Macleod Trail SE, Calgary, AB",
        phone: "403-943-0615",
        website: "https://www.calgaryhealthfoundation.ca",
        email: "",
        type: "health-services",
        description: "A non-profit organization providing health services services to the Calgary community.",
        lat: 50.9450,
        lng: -114.0682
    },
    {
        name: "Calgary Community Health Trust",
        address: "#400, 105 12 Ave SE, Calgary, AB",
        phone: "403-297-1700",
        website: "https://cmha.calgary.ab.ca",
        email: "",
        type: "health-services",
        description: "A non-profit organization providing health services services to the Calgary community.",
        lat: 51.0421,
        lng: -114.0605
    },
    {
        name: "Calgary Sports for Youth (KidSport Calgary)",
        address: "1828 24 St SW, Calgary, AB",
        phone: "403-202-0251",
        website: "https://kidsportcanada.ca/alberta/calgary/",
        email: "",
        type: "sports-recreation",
        description: "A non-profit organization providing sports recreation services to the Calgary community.",
        lat: 51.0371,
        lng: -114.1165
    },
    {
        name: "Calgary Bike Playgrounds",
        address: "200, 1000 8 Ave SW, Calgary, AB",
        phone: "403-269-9888",
        website: "https://caryacalgary.ca",
        email: "",
        type: "sports-recreation",
        description: "A non-profit organization providing sports recreation services to the Calgary community.",
        lat: 51.0456,
        lng: -114.0838
    },
    {
        name: "Calgary Parks Foundation",
        address: "225 13 Ave SW, Calgary, AB",
        phone: "403-974-0751",
        website: "https://www.parksfdn.com",
        email: "",
        type: "environment",
        description: "A non-profit organization providing environment services to the Calgary community.",
        lat: 51.0415,
        lng: -114.0673
    },
    {
        name: "Calgary Conservation Society",
        address: "2500 University Dr NW, Calgary, AB",
        phone: "403-266-5051",
        website: "https://www.ucalgary.ca/contact",
        email: "",
        type: "environment",
        description: "A non-profit organization providing environment services to the Calgary community.",
        lat: 51.0762,
        lng: -114.1299
    },
    {
        name: "Calgary Theatre for Young People",
        address: "200, 1000 8 Ave SW, Calgary, AB",
        phone: "403-264-8575",
        website: "https://caryacalgary.ca",
        email: "",
        type: "arts-culture",
        description: "A non-profit organization providing arts culture services to the Calgary community.",
        lat: 51.0456,
        lng: -114.0838
    },
    {
        name: "Calgary Youth Orchestra Society",
        address: "203 15 Ave SE, Calgary, AB",
        phone: "403-234-7388",
        website: "https://www.calgaryyouthorchestra.com",
        email: "",
        type: "youth-services",
        description: "A non-profit organization providing youth services services to the Calgary community.",
        lat: 51.0401,
        lng: -114.0565
    },
    {
        name: "Calgary Opera Association",
        address: "1315 7 St SW, Calgary, AB",
        phone: "403-262-7286",
        website: "https://calgaryopera.com",
        email: "",
        type: "arts-culture",
        description: "A non-profit organization providing arts culture services to the Calgary community.",
        lat: 51.0417,
        lng: -114.0789
    },
    {
        name: "Calgary Film Society (Calgary Cinematheque)",
        address: "Suite 118, 8820 48 Street NW, Calgary, AB",
        phone: "403-283-1490",
        website: "https://www.calgarycinema.org/",
        email: "",
        type: "arts-culture",
        description: "A non-profit organization providing arts culture services to the Calgary community.",
        lat: 51.1009,
        lng: -114.1565
    },
    {
        name: "Calgary Learning Society (Calgary Learns)",
        address: "130, 2121 29 Street NE, Calgary, AB",
        phone: "403-250-5034",
        website: "https://www.calgarylearns.com",
        email: "",
        type: "education",
        description: "A non-profit organization providing education services to the Calgary community.",
        lat: 51.0700,
        lng: -113.9961
    },
    {
        name: "Calgary STEM Outreach (University of Calgary)",
        address: "2500 University Dr NW, Calgary, AB",
        phone: "403-220-5555",
        website: "https://www.ucalgary.ca/future-students/undergraduate/outreach",
        email: "",
        type: "education",
        description: "A non-profit organization providing education services to the Calgary community.",
        lat: 51.0762,
        lng: -114.1299
    },
    {
        name: "Calgary Youth Empowerment Society",
        address: "200, 1000 8 Ave SW, Calgary, AB",
        phone: "403-269-9888",
        website: "https://caryacalgary.ca",
        email: "",
        type: "youth-services",
        description: "A non-profit organization providing youth services services to the Calgary community.",
        lat: 51.0456,
        lng: -114.0838
    },
    {
        name: "Calgary Volunteer Lawyers (Calgary Legal Guidance)",
        address: "840 7 Ave SW #100, Calgary, AB",
        phone: "403-234-9266",
        website: "https://clg.ab.ca",
        email: "",
        type: "legal-services",
        description: "A non-profit organization providing legal services services to the Calgary community.",
        lat: 51.0489,
        lng: -114.0811
    },
    {
        name: "Calgary Community Food Bank Partner Org",
        address: "5000 11 St SE, Calgary, AB T2H 2Y5",
        phone: "403-253-2050",
        website: "https://www.calgaryfoodbank.com/partners",
        email: "",
        type: "food-shelter",
        description: "A non-profit organization providing food shelter services to the Calgary community.",
        lat: 50.9995,
        lng: -114.0193
    },
    {
        name: "Calgary Housing Support Services",
        address: "200-802 3 Ave SW, Calgary, AB",
        phone: "403-282-1872",
        website: "https://accessiblehousing.ca",
        email: "",
        type: "housing-services",
        description: "A non-profit organization providing housing services services to the Calgary community.",
        lat: 51.0514,
        lng: -114.0805
    },
    {
        name: "Calgary Addiction Recovery Services (Alpha House)",
        address: "203 15 Ave SE, Calgary, AB",
        phone: "403-234-7388",
        website: "https://alphahousecalgary.com",
        email: "",
        type: "health-services",
        description: "A non-profit organization providing health services services to the Calgary community.",
        lat: 51.0401,
        lng: -114.0565
    },
    {
        name: "Calgary Family Resource Network (Closer to Home)",
        address: "3507 17 Ave SW, Calgary, AB",
        phone: "403-543-0550",
        website: "https://www.closertohome.com",
        email: "",
        type: "community-support",
        description: "A non-profit organization providing community support services to the Calgary community.",
        lat: 51.0384,
        lng: -114.1374
    },
    {
        name: "Calgary Child Advocacy Centre",
        address: "400, 105 12 Ave SE, Calgary, AB",
        phone: "403-428-5300",
        website: "https://www.calgarycac.ca",
        email: "",
        type: "youth-services",
        description: "A non-profit organization providing youth services services to the Calgary community.",
        lat: 51.0421,
        lng: -114.0605
    },
    {
        name: "Calgary Men’s Resource Centre (Wood's Homes)",
        address: "805 37 St NW, Calgary, AB",
        phone: "403-299-9699",
        website: "https://www.woodshomes.ca",
        email: "",
        type: "mens-services",
        description: "A non-profit organization providing mens services services to the Calgary community.",
        lat: 51.0597,
        lng: -114.1417
    },
    {
        name: "Calgary Women’s Resource Centre (YWCA)",
        address: "320 5 Ave SE, Calgary, AB",
        phone: "403-263-1550",
        website: "https://www.ywcalgary.ca",
        email: "",
        type: "womens-services",
        description: "A non-profit organization providing womens services services to the Calgary community.",
        lat: 51.0486,
        lng: -114.0531
    },
    {
        name: "Calgary Refugee Sponsorship Council",
        address: "1111 11 Ave SW 5th Floor, Calgary, AB",
        phone: "403-262-2006",
        website: "https://www.ccisab.ca",
        email: "",
        type: "newcomer-services",
        description: "A non-profit organization providing newcomer services services to the Calgary community.",
        lat: 51.0436,
        lng: -114.0863
    },
    {
        name: "Calgary Employment Service (Immigrant Services Calgary)",
        address: "910 7 Ave SW #1200, Calgary, AB",
        phone: "403-265-1120",
        website: "https://www.immigrantservicescalgary.ca",
        email: "",
        type: "employment-services",
        description: "A non-profit organization providing employment services services to the Calgary community.",
        lat: 51.0487,
        lng: -114.0820
    },
    {
        name: "Calgary Youth Mentoring Network (Big Brothers Big Sisters)",
        address: "5945 Centre St S, Calgary, AB",
        phone: "403-777-3535",
        website: "https://bbbscalgary.ca",
        email: "",
        type: "youth-services",
        description: "A non-profit organization providing youth services services to the Calgary community.",
        lat: 50.9875,
        lng: -114.0628
    },
    {
        name: "Calgary Sports Development (Boys & Girls Clubs)",
        address: "223 12 Ave SW, Calgary, AB",
        phone: "403-276-9981",
        website: "https://www.boysandgirlsclubsofcalgary.ca",
        email: "",
        type: "sports-recreation",
        description: "A non-profit organization providing sports recreation services to the Calgary community.",
        lat: 51.0423,
        lng: -114.0673
    },
    {
        name: "Calgary Cultural Society",
        address: "1430, 225 8 Ave SW, Calgary, AB",
        phone: "403-264-5330",
        website: "https://calgaryartsdevelopment.com",
        email: "",
        type: "arts-culture",
        description: "A non-profit organization providing arts culture services to the Calgary community.",
        lat: 51.0461,
        lng: -114.0673
    },
    {
        name: "Calgary Ethnic Seniors Association (carya)",
        address: "200, 1000 8 Ave SW, Calgary, AB",
        phone: "403-269-9888",
        website: "https://caryacalgary.ca",
        email: "",
        type: "seniors-services",
        description: "A non-profit organization providing seniors services services to the Calgary community.",
        lat: 51.0456,
        lng: -114.0838
    },
    {
        name: "Calgary Community Gardens Association (Green Calgary)",
        address: "205, 223 12 Ave SW, Calgary, AB",
        phone: "403-230-1443",
        website: "https://www.calgarycommunitygardens.com",
        email: "",
        type: "environment",
        description: "A non-profit organization providing environment services to the Calgary community.",
        lat: 51.0423,
        lng: -114.0673
    },
    {
        name: "Calgary Immigrant Support Hub",
        address: "125, 565 - 36 Street NE, Calgary, AB",
        phone: "403-569-3325",
        website: "https://www.centrefornewcomers.ca",
        email: "",
        type: "newcomer-services",
        description: "A non-profit organization providing newcomer services services to the Calgary community.",
        lat: 51.0561,
        lng: -113.9782
    }
];
</body>
</html>
